{"version":3,"sources":["webpack://@reflar/twofactor/webpack/bootstrap","webpack://@reflar/twofactor/./forum.js","webpack://@reflar/twofactor/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@reflar/twofactor/./src/forum/components/AuthyModal.js","webpack://@reflar/twofactor/./src/forum/components/Countries.js","webpack://@reflar/twofactor/./src/forum/components/LogInFactorModal.js","webpack://@reflar/twofactor/./src/forum/components/PhoneModal.js","webpack://@reflar/twofactor/./src/forum/components/RecoveryModal.js","webpack://@reflar/twofactor/./src/forum/components/TwoFactorModal.js","webpack://@reflar/twofactor/./src/forum/index.js","webpack://@reflar/twofactor/external \"flarum.core.compat['Model']\"","webpack://@reflar/twofactor/external \"flarum.core.compat['app']\"","webpack://@reflar/twofactor/external \"flarum.core.compat['components/Alert']\"","webpack://@reflar/twofactor/external \"flarum.core.compat['components/Button']\"","webpack://@reflar/twofactor/external \"flarum.core.compat['components/Dropdown']\"","webpack://@reflar/twofactor/external \"flarum.core.compat['components/LogInModal']\"","webpack://@reflar/twofactor/external \"flarum.core.compat['components/Modal']\"","webpack://@reflar/twofactor/external \"flarum.core.compat['components/SettingsPage']\"","webpack://@reflar/twofactor/external \"flarum.core.compat['components/Switch']\"","webpack://@reflar/twofactor/external \"flarum.core.compat['extend']\"","webpack://@reflar/twofactor/external \"flarum.core.compat['helpers/listItems']\"","webpack://@reflar/twofactor/external \"flarum.core.compat['models/User']\"","webpack://@reflar/twofactor/external \"flarum.core.compat['utils/ItemList']\""],"names":["AuthyModal","init","twoFactorCode","m","prop","phone","enabled","app","session","user","twofa_enabled","$","getScript","mask","placeholder","country","name","mcode","className","title","translator","trans","countryItems","items","ItemList","add","Dropdown","component","buttonClassName","menuClassName","label","children","Countries","map","active","Button","icon","onclick","content","forum","data","attributes","twillio_enabled","modal","close","show","PhoneModal","TwoFactorModal","listItems","toArray","withAttr","request","url","attribute","method","replace","redraw","loading","then","response","id","alert","Alert","type","alerts","successAlert","RecoveryModal","onsubmit","e","preventDefault","errorHandler","onerror","bind","console","log","Modal","LogInFactorModal","identification","props","password","remember","pageId","toUpperCase","userId","dismissible","window","location","reload","authy_enabled","recoveries","split","recovery","secret","google2fa_secret","decodeURIComponent","Switch","state","onchange","value","initializers","User","prototype","Model","LogInModal","makeid","text","possible","i","charAt","Math","floor","random","length","failure","parseInt","status","extend","SettingsPage"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","/*\r\n * This file is part of Flarum.\r\n *\r\n * (c) Toby Zerner <toby.zerner@gmail.com>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\n\r\nexport * from './src/forum';","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import app from 'flarum/app'\r\nimport Alert from 'flarum/components/Alert'\r\nimport {extend} from 'flarum/extend'\r\nimport ItemList from 'flarum/utils/ItemList'\r\nimport listItems from 'flarum/helpers/listItems'\r\nimport Modal from 'flarum/components/Modal'\r\nimport Dropdown from 'flarum/components/Dropdown'\r\nimport Button from 'flarum/components/Button'\r\nimport TwoFactorModal from './TwoFactorModal'\r\nimport RecoveryModal from './RecoveryModal'\r\nimport Countries from './Countries'\r\nimport PhoneModal from \"./PhoneModal\";\r\n\r\nexport default class AuthyModal extends Modal {\r\n    init() {\r\n        super.init()\r\n\r\n        this.twoFactorCode = m.prop('')\r\n\r\n\r\n        this.phone = m.prop('')\r\n\r\n        this.enabled = m.prop(app.session.user.twofa_enabled())\r\n\r\n        $.getScript('https://cdn.rawgit.com/igorescobar/jQuery-Mask-Plugin/master/src/jquery.mask.js', function () {\r\n            $('#phone').mask('(000) 000-0000')\r\n            $('#code').mask('AAA-AAA', {placeholder: '   -   '})\r\n        })\r\n\r\n        this.country = {\r\n            name: 'United States of America',\r\n            mcode: '+1'\r\n        }\r\n    }\r\n\r\n    className() {\r\n        return 'TwoFactorModal Modal--small'\r\n    }\r\n\r\n    title() {\r\n        return app.translator.trans('reflar-twofactor.forum.modal.twofactor_title')\r\n    }\r\n\r\n    countryItems() {\r\n        const items = new ItemList()\r\n\r\n        items.add('sort',\r\n            Dropdown.component({\r\n                buttonClassName: 'Button FormControl',\r\n                menuClassName: 'Country-Dropdown-actual',\r\n                label: this.country.name,\r\n                children: Countries().map(country => {\r\n                    const active = (this.country === country)\r\n\r\n                    return Button.component({\r\n                        children: country.name,\r\n                        icon: active ? 'check' : true,\r\n                        onclick: () => {\r\n                            this.country = country\r\n                        },\r\n                        active: active\r\n                    })\r\n                })\r\n            })\r\n        )\r\n\r\n        return items\r\n    }\r\n\r\n    content(user) {\r\n        return (\r\n            <div className='Modal-body'>\r\n                <div className='Form'>\r\n                    <div className='Form-group'>\r\n                        <h2 style=\"text-align: center\">{app.translator.trans('reflar-twofactor.forum.modal.authy_heading')}</h2>\r\n                        {app.forum.data.attributes.twillio_enabled === \"1\" ?\r\n                            Button.component({\r\n                                className: 'Button Button--primary Switch-button',\r\n                                onclick: () => {\r\n                                    app.modal.close()\r\n                                    app.modal.show(new PhoneModal())\r\n                                },\r\n                                children: app.translator.trans('reflar-twofactor.forum.modal.stPhone')\r\n                            })\r\n                            : ''}\r\n                        {Button.component({\r\n                            className: 'Button Button--primary Switch-button',\r\n                            onclick: () => {\r\n                                app.modal.close()\r\n                                app.modal.show(new TwoFactorModal(this.user))\r\n                            },\r\n                            children: app.translator.trans('reflar-twofactor.forum.modal.stTOTP')\r\n                        })}\r\n                        <div style='text-align: center' className='helpText Submit-Button'>\r\n                            {app.translator.trans('reflar-twofactor.forum.modal.helpAuthy')}\r\n                        </div>\r\n                    </div>\r\n                    {this.enabled() !== 5 ? (\r\n                        <div className='Form-group'>\r\n                            <ul className='Country-dropdown'>{listItems(this.countryItems().toArray())}</ul>\r\n                            <input\r\n                                type='text'\r\n                                id='phone'\r\n                                oninput={m.withAttr('value', this.phone)}\r\n                                className='FormControl Phone-Input'\r\n                            />\r\n                            {Button.component({\r\n                                className: 'Button Button--primary',\r\n                                onclick: () => {\r\n                                    app.request({\r\n                                        url: app.forum.attribute('apiUrl') + '/twofactor/verifycode',\r\n                                        method: 'POST',\r\n                                        data: {\r\n                                            'step': 5,\r\n                                            'countryCode': this.country.mcode,\r\n                                            'phone': this.phone().replace(/[- )(]/g, ''),\r\n                                        }\r\n                                    })\r\n                                    this.enabled(5)\r\n                                    m.redraw()\r\n                                },\r\n                                children: app.translator.trans('reflar-twofactor.forum.modal.otSetup')\r\n                            })}\r\n                        </div>\r\n                    ) : (\r\n                        <div>\r\n                            <input\r\n                                type='text'\r\n                                id='code'\r\n                                style='text-transform: uppercase;'\r\n                                oninput={m.withAttr('value', this.twoFactorCode)}\r\n                                className='FormControl'\r\n                            />\r\n                            {Button.component({\r\n                                className: 'Button Button--primary TwoFactor-button',\r\n                                loading: this.loading,\r\n                                onclick: () => {\r\n                                    app.request({\r\n                                        url: app.forum.attribute('apiUrl') + '/twofactor/verifycode',\r\n                                        method: 'POST',\r\n                                        data: {\r\n                                            'step': 6,\r\n                                            'code': this.twoFactorCode()\r\n                                        },\r\n                                    }).then(response => {\r\n                                        const data = response.data.id\r\n                                        if (data === 'IncorrectCode') {\r\n                                            this.alert = new Alert({\r\n                                                type: 'error',\r\n                                                children: app.translator.trans('reflar-twofactor.forum.incorrect_2fa')\r\n                                            })\r\n                                            m.redraw()\r\n                                        } else {\r\n                                            app.alerts.show(this.successAlert = new Alert({\r\n                                                type: 'success',\r\n                                                children: app.translator.trans('reflar-twofactor.forum.2fa_enabled')\r\n                                            }))\r\n                                            app.modal.show(new RecoveryModal({data}))\r\n                                        }\r\n                                    })\r\n\r\n                                    this.loading = false\r\n                                },\r\n                                children: app.translator.trans('reflar-twofactor.forum.modal.button')\r\n                            })}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    onsubmit(e) {\r\n        e.preventDefault();\r\n\r\n        if (this.loading) return\r\n\r\n        this.loading = true\r\n\r\n        this.alert = null\r\n\r\n        app.request({\r\n            url: app.forum.attribute('apiUrl') + '/twofactor/verifycode',\r\n            method: 'POST',\r\n            data: {\r\n                'step': 5,\r\n                'code': this.twoFactorCode()\r\n            },\r\n            errorHandler: this.onerror.bind(this)\r\n        }).then(response => {\r\n            console.log(response)\r\n            const data = response.data.id\r\n            if (data === 'IncorrectCode') {\r\n                this.alert = new Alert({\r\n                    type: 'error',\r\n                    children: app.translator.trans('reflar-twofactor.forum.incorrect_2fa')\r\n                })\r\n                m.redraw()\r\n            } else {\r\n                app.alerts.show(this.successAlert = new Alert({\r\n                    type: 'success',\r\n                    children: app.translator.trans('reflar-twofactor.forum.2fa_enabled')\r\n                }))\r\n                app.modal.show(new RecoveryModal({data}))\r\n            }\r\n        })\r\n\r\n        this.loading = false\r\n    }\r\n}\r\n","export default function LogInFactorModal() {\r\n    return [\r\n        {name: \"United States of America\", mcode: \"+1\"},\r\n        {name: \"United Kingdom\", mcode: \"+44\"},\r\n        {name: \"Algeria\", mcode: \"+213\"},\r\n        {name: \"Andorra\", mcode: \"+376\"},\r\n        {name: \"Angola\", mcode: \"+244\"},\r\n        {name: \"Anguilla\", mcode: \"+1264\"},\r\n        {name: \"Antigua & Barbuda\", mcode: \"+1268\"},\r\n        {name: \"Argentina\", mcode: \"+54\"},\r\n        {name: \"Armenia\", mcode: \"+374\"},\r\n        {name: \"Aruba\", mcode: \"+297\"},\r\n        {name: \"Australia\", mcode: \"+61\"},\r\n        {name: \"Austria\", mcode: \"+43\"},\r\n        {name: \"Azerbaijan\", mcode: \"+994\"},\r\n        {name: \"Bahamas\", mcode: \"+1242\"},\r\n        {name: \"Bahrain\", mcode: \"+973\"},\r\n        {name: \"Bangladesh\", mcode: \"+880\"},\r\n        {name: \"Barbados\", mcode: \"+1246\"},\r\n        {name: \"Belarus\", mcode: \"+375\"},\r\n        {name: \"Belgium\", mcode: \"+32\"},\r\n        {name: \"Belize\", mcode: \"+501\"},\r\n        {name: \"Benin\", mcode: \"+229\"},\r\n        {name: \"Bermuda\", mcode: \"+1441\"},\r\n        {name: \"Bhutan\", mcode: \"+975\"},\r\n        {name: \"Bolivia\", mcode: \"+591\"},\r\n        {name: \"Bosnia Herzegovina\", mcode: \"+387\"},\r\n        {name: \"Botswana\", mcode: \"+267\"},\r\n        {name: \"Brazil\", mcode: \"+55\"},\r\n        {name: \"Brunei\", mcode: \"+673\"},\r\n        {name: \"Bulgaria\", mcode: \"+359\"},\r\n        {name: \"Burkina Faso\", mcode: \"+226\"},\r\n        {name: \"Burundi\", mcode: \"+257\"},\r\n        {name: \"Cambodia\", mcode: \"+855\"},\r\n        {name: \"Cameroon\", mcode: \"+237\"},\r\n        {name: \"Canada\", mcode: \"+1\"},\r\n        {name: \"Cape Verde Islands\", mcode: \"+238\"},\r\n        {name: \"Cayman Islands\", mcode: \"+1345\"},\r\n        {name: \"Central African Republic\", mcode: \"+236\"},\r\n        {name: \"Chile\", mcode: \"+56\"},\r\n        {name: \"China\", mcode: \"+86\"},\r\n        {name: \"Colombia\", mcode: \"+57\"},\r\n        {name: \"Comoros\", mcode: \"+269\"},\r\n        {name: \"Congo\", mcode: \"+242\"},\r\n        {name: \"Cook Islands\", mcode: \"+682\"},\r\n        {name: \"Costa Rica\", mcode: \"+506\"},\r\n        {name: \"Croatia\", mcode: \"+385\"},\r\n        {name: \"Cuba\", mcode: \"+53\"},\r\n        {name: \"Cyprus - North\", mcode: \"+90\"},\r\n        {name: \"Cyprus - South\", mcode: \"+357\"},\r\n        {name: \"Czech Republic\", mcode: \"+420\"},\r\n        {name: \"Denmark\", mcode: \"+45\"},\r\n        {name: \"Djibouti\", mcode: \"+253\"},\r\n        {name: \"Dominica\", mcode: \"+1809\"},\r\n        {name: \"Dominican Republic\", mcode: \"+1809\"},\r\n        {name: \"Ecuador\", mcode: \"+593\"},\r\n        {name: \"Egypt\", mcode: \"+20\"},\r\n        {name: \"El Salvador\", mcode: \"+503\"},\r\n        {name: \"Equatorial Guinea\", mcode: \"+240\"},\r\n        {name: \"Eritrea\", mcode: \"+291\"},\r\n        {name: \"Estonia\", mcode: \"+372\"},\r\n        {name: \"Ethiopia\", mcode: \"+251\"},\r\n        {name: \"Falkland Islands\", mcode: \"+500\"},\r\n        {name: \"Faroe Islands\", mcode: \"+298\"},\r\n        {name: \"Fiji\", mcode: \"+679\"},\r\n        {name: \"Finland\", mcode: \"+358\"},\r\n        {name: \"France\", mcode: \"+33\"},\r\n        {name: \"French Guiana\", mcode: \"+594\"},\r\n        {name: \"French Polynesia\", mcode: \"+689\"},\r\n        {name: \"Gabon\", mcode: \"+241\"},\r\n        {name: \"Gambia\", mcode: \"+220\"},\r\n        {name: \"Georgia\", mcode: \"+7880\"},\r\n        {name: \"Germany\", mcode: \"+49\"},\r\n        {name: \"Ghana\", mcode: \"+233\"},\r\n        {name: \"Gibraltar\", mcode: \"+350\"},\r\n        {name: \"Greece\", mcode: \"+30\"},\r\n        {name: \"Greenland\", mcode: \"+299\"},\r\n        {name: \"Grenada\", mcode: \"+1473\"},\r\n        {name: \"Guadeloupe\", mcode: \"+590\"},\r\n        {name: \"Guam\", mcode: \"+671\"},\r\n        {name: \"Guatemala\", mcode: \"+502\"},\r\n        {name: \"Guinea\", mcode: \"+224\"},\r\n        {name: \"Guinea - Bissau\", mcode: \"+245\"},\r\n        {name: \"Guyana\", mcode: \"+592\"},\r\n        {name: \"Haiti\", mcode: \"+509\"},\r\n        {name: \"Honduras\", mcode: \"+504\"},\r\n        {name: \"Hong Kong\", mcode: \"+852\"},\r\n        {name: \"Hungary\", mcode: \"+36\"},\r\n        {name: \"Iceland\", mcode: \"+354\"},\r\n        {name: \"India\", mcode: \"+91\"},\r\n        {name: \"Indonesia\", mcode: \"+62\"},\r\n        {name: \"Iraq\", mcode: \"+964\"},\r\n        {name: \"Iran\", mcode: \"+98\"},\r\n        {name: \"Ireland\", mcode: \"+353\"},\r\n        {name: \"Israel\", mcode: \"+972\"},\r\n        {name: \"Italy\", mcode: \"+39\"},\r\n        {name: \"Jamaica\", mcode: \"+1876\"},\r\n        {name: \"Japan\", mcode: \"+81\"},\r\n        {name: \"Jordan\", mcode: \"+962\"},\r\n        {name: \"Kazakhstan\", mcode: \"+7\"},\r\n        {name: \"Kenya\", mcode: \"+254\"},\r\n        {name: \"Kiribati\", mcode: \"+686\"},\r\n        {name: \"Korea - North\", mcode: \"+850\"},\r\n        {name: \"Korea - South\", mcode: \"+82\"},\r\n        {name: \"Kuwait\", mcode: \"+965\"},\r\n        {name: \"Kyrgyzstan\", mcode: \"+996\"},\r\n        {name: \"Laos\", mcode: \"+856\"},\r\n        {name: \"Latvia\", mcode: \"+371\"},\r\n        {name: \"Lebanon\", mcode: \"+961\"},\r\n        {name: \"Lesotho\", mcode: \"+266\"},\r\n        {name: \"Liberia\", mcode: \"+231\"},\r\n        {name: \"Libya\", mcode: \"+218\"},\r\n        {name: \"Liechtenstein\", mcode: \"+417\"},\r\n        {name: \"Lithuania\", mcode: \"+370\"},\r\n        {name: \"Luxembourg\", mcode: \"+352\"},\r\n        {name: \"Macao\", mcode: \"+853\"},\r\n        {name: \"Macedonia\", mcode: \"+389\"},\r\n        {name: \"Madagascar\", mcode: \"+261\"},\r\n        {name: \"Malawi\", mcode: \"+265\"},\r\n        {name: \"Malaysia\", mcode: \"+60\"},\r\n        {name: \"Maldives\", mcode: \"+960\"},\r\n        {name: \"Mali\", mcode: \"+223\"},\r\n        {name: \"Malta\", mcode: \"+356\"},\r\n        {name: \"Marshall Islands\", mcode: \"+692\"},\r\n        {name: \"Martinique\", mcode: \"+596\"},\r\n        {name: \"Mauritania\", mcode: \"+222\"},\r\n        {name: \"Mayotte\", mcode: \"+269\"},\r\n        {name: \"Mexico\", mcode: \"+52\"},\r\n        {name: \"Micronesia\", mcode: \"+691\"},\r\n        {name: \"Moldova\", mcode: \"+373\"},\r\n        {name: \"Monaco\", mcode: \"+377\"},\r\n        {name: \"Mongolia\", mcode: \"+976\"},\r\n        {name: \"Montserrat\", mcode: \"+1664\"},\r\n        {name: \"Morocco\", mcode: \"+212\"},\r\n        {name: \"Mozambique\", mcode: \"+258\"},\r\n        {name: \"Myanmar\", mcode: \"+95\"},\r\n        {name: \"Namibia\", mcode: \"+264\"},\r\n        {name: \"Nauru\", mcode: \"+674\"},\r\n        {name: \"Nepal\", mcode: \"+977\"},\r\n        {name: \"Netherlands\", mcode: \"+31\"},\r\n        {name: \"New Caledonia\", mcode: \"+687\"},\r\n        {name: \"New Zealand\", mcode: \"+64\"},\r\n        {name: \"Nicaragua\", mcode: \"+505\"},\r\n        {name: \"Niger\", mcode: \"+227\"},\r\n        {name: \"Nigeria\", mcode: \"+234\"},\r\n        {name: \"Niue\", mcode: \"+683\"},\r\n        {name: \"Norfolk Islands\", mcode: \"+672\"},\r\n        {name: \"Northern Marianas\", mcode: \"+670\"},\r\n        {name: \"Norway\", mcode: \"+47\"},\r\n        {name: \"Oman\", mcode: \"+968\"},\r\n        {name: \"Pakistan\", mcode: \"+92\"},\r\n        {name: \"Palau\", mcode: \"+680\"},\r\n        {name: \"Panama\", mcode: \"+507\"},\r\n        {name: \"Papua New Guinea\", mcode: \"+675\"},\r\n        {name: \"Paraguay\", mcode: \"+595\"},\r\n        {name: \"Peru\", mcode: \"+51\"},\r\n        {name: \"Philippines\", mcode: \"+63\"},\r\n        {name: \"Poland\", mcode: \"+48\"},\r\n        {name: \"Portugal\", mcode: \"+351\"},\r\n        {name: \"Puerto Rico\", mcode: \"+1787\"},\r\n        {name: \"Qatar\", mcode: \"+974\"},\r\n        {name: \"Reunion\", mcode: \"+262\"},\r\n        {name: \"Romania\", mcode: \"+40\"},\r\n        {name: \"Russia\", mcode: \"+7\"},\r\n        {name: \"Rwanda\", mcode: \"+250\"},\r\n        {name: \"San Marino\", mcode: \"+378\"},\r\n        {name: \"Sao Tome & Principe\", mcode: \"+239\"},\r\n        {name: \"Saudi Arabia\", mcode: \"+966\"},\r\n        {name: \"Senegal\", mcode: \"+221\"},\r\n        {name: \"Serbia\", mcode: \"+381\"},\r\n        {name: \"Seychelles\", mcode: \"+248\"},\r\n        {name: \"Sierra Leone\", mcode: \"+232\"},\r\n        {name: \"Singapore\", mcode: \"+65\"},\r\n        {name: \"Slovak Republic\", mcode: \"+421\"},\r\n        {name: \"Slovenia\", mcode: \"+386\"},\r\n        {name: \"Solomon Islands\", mcode: \"+677\"},\r\n        {name: \"Somalia\", mcode: \"+252\"},\r\n        {name: \"South Africa\", mcode: \"+27\"},\r\n        {name: \"Spain\", mcode: \"+34\"},\r\n        {name: \"Sri Lanka\", mcode: \"+94\"},\r\n        {name: \"St. Helena\", mcode: \"+290\"},\r\n        {name: \"St. Kitts\", mcode: \"+1869\"},\r\n        {name: \"St. Lucia\", mcode: \"+1758\"},\r\n        {name: \"Suriname\", mcode: \"+597\"},\r\n        {name: \"Sudan\", mcode: \"+249\"},\r\n        {name: \"Swaziland\", mcode: \"+268\"},\r\n        {name: \"Sweden\", mcode: \"+46\"},\r\n        {name: \"Switzerland\", mcode: \"+41\"},\r\n        {name: \"Syria\", mcode: \"+963\"},\r\n        {name: \"Taiwan\", mcode: \"+886\"},\r\n        {name: \"Tajikistan\", mcode: \"+992\"},\r\n        {name: \"Thailand\", mcode: \"+66\"},\r\n        {name: \"Togo\", mcode: \"+228\"},\r\n        {name: \"Tonga\", mcode: \"+676\"},\r\n        {name: \"Trinidad & Tobago\", mcode: \"+1868\"},\r\n        {name: \"Tunisia\", mcode: \"+216\"},\r\n        {name: \"Turkey\", mcode: \"+90\"},\r\n        {name: \"Turkmenistan\", mcode: \"+993\"},\r\n        {name: \"Turks & Caicos Islands\", mcode: \"+1649\"},\r\n        {name: \"Tuvalu\", mcode: \"+688\"},\r\n        {name: \"Uganda\", mcode: \"+256\"},\r\n        {name: \"Ukraine\", mcode: \"+380\"},\r\n        {name: \"United Arab Emirates\", mcode: \"+971\"},\r\n        {name: \"Uruguay\", mcode: \"+598\"},\r\n        {name: \"Uzbekistan\", mcode: \"+998\"},\r\n        {name: \"Vanuatu\", mcode: \"+678\"},\r\n        {name: \"Vatican City\", mcode: \"+379\"},\r\n        {name: \"Venezuela\", mcode: \"+58\"},\r\n        {name: \"Vietnam\", mcode: \"+84\"},\r\n        {name: \"Virgin Islands - British\", mcode: \"+1\"},\r\n        {name: \"Virgin Islands - US\", mcode: \"+1\"},\r\n        {name: \"Wallis & Futuna\", mcode: \"+681\"},\r\n        {name: \"Yemen\", mcode: \"North)(+969\"},\r\n        {name: \"Yemen\", mcode: \"South)(+967\"},\r\n        {name: \"Zambia\", mcode: \"+260\"},\r\n        {name: \"Zimbabwe\", mcode: \"+263\"}\r\n    ]\r\n}\r\n\r\n","import app from 'flarum/app'\r\nimport Alert from 'flarum/components/Alert'\r\nimport {extend} from 'flarum/extend'\r\nimport Modal from 'flarum/components/Modal'\r\nimport Button from 'flarum/components/Button'\r\n\r\nexport default class LogInFactorModal extends Modal {\r\n    init() {\r\n        super.init()\r\n        this.identification = this.props.data.identification\r\n\r\n        this.password = this.props.data.password\r\n\r\n        this.remember = this.props.data.remember\r\n\r\n        this.pageId = this.props.data.pageId\r\n\r\n        this.twoFactorCode = m.prop('')\r\n\r\n\r\n        $.getScript('https://cdn.rawgit.com/igorescobar/jQuery-Mask-Plugin/master/src/jquery.mask.js', function () {\r\n            $('#code').mask('AAA-AAA', {\r\n                placeholder: \"   -   \"\r\n            })\r\n        })\r\n    }\r\n\r\n    className() {\r\n        return 'TwoFactorModal Modal--small'\r\n    }\r\n\r\n    title() {\r\n        return app.translator.trans('reflar-twofactor.forum.modal.login_title')\r\n    }\r\n\r\n\r\n    content(user) {\r\n        return (\r\n            <div className='Modal-body'>\r\n                {app.translator.trans('reflar-twofactor.forum.modal.2fa_help')}\r\n                <div className='Form'>\r\n                    <div className='Form-group'>\r\n                        <div className='TwoFactor-input'>\r\n                            <input type='text'\r\n                                   style=\"text-transform:uppercase\"\r\n                                   id=\"code\"\r\n                                   oninput={m.withAttr('value', this.twoFactorCode)}\r\n                                   className='FormControl'\r\n                                   placeholder={app.translator.trans('reflar-twofactor.forum.modal.placeholder')}/>\r\n                        </div>\r\n                        <Button className='Button Button--primary TwoFactor-button' loading={this.loading} type='submit'>\r\n                            {app.translator.trans('reflar-twofactor.forum.modal.button')}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    onsubmit(e) {\r\n        e.preventDefault()\r\n\r\n        if (this.loading) return\r\n\r\n        this.loading = true\r\n\r\n        this.twoFactorCode(this.twoFactorCode().toUpperCase())\r\n\r\n        app.request({\r\n            url: app.forum.attribute('apiUrl') + '/twofactor/login',\r\n            method: 'POST',\r\n            data: {\r\n                'identification': this.identification,\r\n                'password': this.password,\r\n                'remember': this.remember,\r\n                'twofactor': this.twoFactorCode(),\r\n                'pageId': this.pageId\r\n            }\r\n        }).then(response => {\r\n            if (response.userId === 'IncorrectCode') {\r\n                this.alert = new Alert({\r\n                    type: 'error',\r\n                    dismissible: false,\r\n                    children: app.translator.trans('reflar-twofactor.forum.incorrect_2fa')\r\n                })\r\n                this.loading = false\r\n                m.redraw()\r\n            } else {\r\n                window.location.reload()\r\n            }\r\n        })\r\n    }\r\n}\r\n","import app from 'flarum/app'\r\nimport Alert from 'flarum/components/Alert'\r\nimport {extend} from 'flarum/extend'\r\nimport ItemList from 'flarum/utils/ItemList'\r\nimport listItems from 'flarum/helpers/listItems'\r\nimport Modal from 'flarum/components/Modal'\r\nimport Dropdown from 'flarum/components/Dropdown'\r\nimport Button from 'flarum/components/Button'\r\nimport AuthyModal from './AuthyModal'\r\nimport TwoFactorModal from './TwoFactorModal'\r\nimport RecoveryModal from './RecoveryModal'\r\nimport Countries from './Countries'\r\n\r\nexport default class PhoneModal extends Modal {\r\n    init() {\r\n        super.init()\r\n\r\n        this.twoFactorCode = m.prop('')\r\n\r\n\r\n        this.phone = m.prop('')\r\n\r\n        this.enabled = m.prop(app.session.user.twofa_enabled())\r\n\r\n        $.getScript('https://cdn.rawgit.com/igorescobar/jQuery-Mask-Plugin/master/src/jquery.mask.js', function () {\r\n            $('#phone').mask('(000) 000-0000')\r\n            $('#code').mask('AAA-AAA', {placeholder: '   -   '})\r\n        })\r\n\r\n        this.country = {\r\n            name: 'United States of America',\r\n            mcode: '+1'\r\n        }\r\n\r\n    }\r\n\r\n    className() {\r\n        return 'TwoFactorModal Modal--small'\r\n    }\r\n\r\n    title() {\r\n        return app.translator.trans('reflar-twofactor.forum.modal.twofactor_title')\r\n    }\r\n\r\n    countryItems() {\r\n        const items = new ItemList()\r\n\r\n        items.add('sort',\r\n            Dropdown.component({\r\n                buttonClassName: 'Button FormControl',\r\n                menuClassName: 'Country-Dropdown-actual',\r\n                label: this.country.name,\r\n                children: Countries().map(country => {\r\n                    const active = (this.country === country)\r\n\r\n                    return Button.component({\r\n                        children: country.name,\r\n                        icon: active ? 'check' : true,\r\n                        onclick: () => {\r\n                            this.country = country\r\n                        },\r\n                        active: active\r\n                    })\r\n                })\r\n            })\r\n        )\r\n\r\n        return items\r\n    }\r\n\r\n    content(user) {\r\n        return (\r\n            <div className='Modal-body'>\r\n                <div className='Form'>\r\n                    <div className='Form-group'>\r\n                        <h2 style=\"text-align: center\">{app.translator.trans('reflar-twofactor.forum.modal.phone_heading')}</h2>\r\n                        {this.enabled() !== 3 ? Button.component({\r\n                            className: 'Button Button--primary Switch-button',\r\n                            onclick: () => {\r\n                                app.modal.close()\r\n                                app.modal.show(new TwoFactorModal(this.user))\r\n                            },\r\n                            children: app.translator.trans('reflar-twofactor.forum.modal.stTOTP')\r\n                        }) : ''}\r\n                        {app.forum.data.attributes.authy_enabled === \"1\" ?\r\n                            Button.component({\r\n                                className: 'Button Button--primary Switch-button',\r\n                                onclick: () => {\r\n                                    app.modal.close()\r\n                                    app.modal.show(new AuthyModal())\r\n                                },\r\n                                children: app.translator.trans('reflar-twofactor.forum.modal.stAuthy')\r\n                            })\r\n                            : ''}\r\n                        <div style='text-align: center' className='helpText Submit-Button'>\r\n                            {app.translator.trans('reflar-twofactor.forum.modal.helpPhone')}\r\n                        </div>\r\n                    </div>\r\n                    {this.enabled() !== 3 ? (\r\n                        <div className='Form-group'>\r\n                            <ul className='Country-dropdown'>{listItems(this.countryItems().toArray())}</ul>\r\n                            <input\r\n                                type='text'\r\n                                id='phone'\r\n                                oninput={m.withAttr('value', this.phone)}\r\n                                className='FormControl Phone-Input'\r\n                            />\r\n                            {Button.component({\r\n                                className: 'Button Button--primary',\r\n                                onclick: () => {\r\n                                    app.request({\r\n                                        url: app.forum.attribute('apiUrl') + '/twofactor/verifycode',\r\n                                        method: 'POST',\r\n                                        data: {\r\n                                            'step': 3,\r\n                                            'phone': this.country.mcode + this.phone().replace(/[- )(]/g, ''),\r\n                                        }\r\n                                    })\r\n                                    this.enabled(3)\r\n                                    m.redraw()\r\n                                },\r\n                                children: app.translator.trans('reflar-twofactor.forum.modal.submitPhone')\r\n                            })}\r\n                        </div>\r\n                    ) : (\r\n                        <div>\r\n                            {Button.component({\r\n                                className: 'Button Button--primary TwoFactor-button',\r\n                                loading: this.loading,\r\n                                onclick: () => {\r\n                                    app.request({\r\n                                        url: app.forum.attribute('apiUrl') + '/twofactor/verifycode',\r\n                                        method: 'POST',\r\n                                        data: {\r\n                                            'step': 1\r\n                                        },\r\n                                        errorHandler: this.onerror.bind(this)\r\n                                    }).then(() => {\r\n                                        app.modal.close()\r\n                                        app.modal.show(new TwoFactorModal(this.user))\r\n                                    })\r\n\r\n                                    this.loading = false\r\n                                },\r\n                                children: app.translator.trans('reflar-twofactor.forum.modal.back')\r\n                            })}\r\n                            <input\r\n                                type='text'\r\n                                id='code'\r\n                                style='text-transform: uppercase;'\r\n                                oninput={m.withAttr('value', this.twoFactorCode)}\r\n                                className='FormControl'\r\n                            />\r\n                            {Button.component({\r\n                                className: 'Button Button--primary TwoFactor-button',\r\n                                loading: this.loading,\r\n                                onclick: () => {\r\n                                    app.request({\r\n                                        url: app.forum.attribute('apiUrl') + '/twofactor/verifycode',\r\n                                        method: 'POST',\r\n                                        data: {\r\n                                            'step': 4,\r\n                                            'code': this.twoFactorCode()\r\n                                        },\r\n                                    }).then(response => {\r\n                                        const data = response.data.id\r\n                                        if (data === 'IncorrectCode') {\r\n                                            this.alert = new Alert({\r\n                                                type: 'error',\r\n                                                children: app.translator.trans('reflar-twofactor.forum.incorrect_2fa')\r\n                                            })\r\n                                            m.redraw()\r\n                                        } else {\r\n                                            app.alerts.show(this.successAlert = new Alert({\r\n                                                type: 'success',\r\n                                                children: app.translator.trans('reflar-twofactor.forum.2fa_enabled')\r\n                                            }))\r\n                                            app.modal.show(new RecoveryModal({data}))\r\n                                        }\r\n                                    })\r\n\r\n                                    this.loading = false\r\n                                },\r\n                                children: app.translator.trans('reflar-twofactor.forum.modal.button')\r\n                            })}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    onsubmit(e) {\r\n        e.preventDefault()\r\n\r\n        if (this.loading) return\r\n\r\n        this.loading = true\r\n\r\n        this.alert = null\r\n\r\n        app.request({\r\n            url: app.forum.attribute('apiUrl') + '/twofactor/verifycode',\r\n            method: 'POST',\r\n            data: {\r\n                'step': 4,\r\n                'code': this.twoFactorCode()\r\n            },\r\n            errorHandler: this.onerror.bind(this)\r\n        }).then(response => {\r\n            console.log(response)\r\n            const data = response.data.id\r\n            if (data === 'IncorrectCode') {\r\n                this.alert = new Alert({\r\n                    type: 'error',\r\n                    children: app.translator.trans('reflar-twofactor.forum.incorrect_2fa')\r\n                })\r\n                m.redraw()\r\n            } else {\r\n                app.alerts.show(this.successAlert = new Alert({\r\n                    type: 'success',\r\n                    children: app.translator.trans('reflar-twofactor.forum.2fa_enabled')\r\n                }))\r\n                app.modal.show(new RecoveryModal({data}))\r\n            }\r\n        })\r\n\r\n        this.loading = false\r\n    }\r\n}\r\n","import app from 'flarum/app'\r\nimport { extend } from 'flarum/extend'\r\nimport Modal from 'flarum/components/Modal'\r\nimport Button from 'flarum/components/Button'\r\n\r\nexport default class RecoveryModal extends Modal {\r\n  init () {\r\n    super.init()\r\n\r\n    this.recoveries = this.props.data.split(',')\r\n  }\r\n\r\n  className () {\r\n    return 'TwoFactorModal Modal--small'\r\n  }\r\n\r\n  title () {\r\n    return app.translator.trans('reflar-twofactor.forum.modal.twofactor_title')\r\n  }\r\n\r\n  content (user) {\r\n    return (\r\n      <div className='Modal-body'>\r\n        <div className='Form'>\r\n          <div className='Form-group'>\r\n            <div className='TwoFactor-codes'>\r\n              <h3>{app.translator.trans('reflar-twofactor.forum.modal.recov_help1')}</h3>\r\n              <h4>{app.translator.trans('reflar-twofactor.forum.modal.recov_help2')}</h4>\r\n              {this.recoveries.map(recovery => {\r\n                return (\r\n                  <br />,\r\n                    <h3>{recovery}</h3>\r\n                )\r\n              })}\r\n            </div>\r\n            <Button className='Button Button--primary TwoFactor-button' loading={this.loading} type='submit'>\r\n              {app.translator.trans('reflar-twofactor.forum.modal.close')}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  onsubmit (e) {\r\n    app.modal.close()\r\n  }\r\n}\r\n","import app from 'flarum/app'\r\nimport Alert from 'flarum/components/Alert'\r\nimport {extend} from 'flarum/extend'\r\nimport Modal from 'flarum/components/Modal'\r\nimport Switch from 'flarum/components/Switch'\r\nimport Button from 'flarum/components/Button'\r\nimport AuthyModal from './AuthyModal'\r\nimport PhoneModal from './PhoneModal'\r\nimport RecoveryModal from './RecoveryModal'\r\n\r\nexport default class TwoFactorModal extends Modal {\r\n    init() {\r\n        super.init()\r\n\r\n        this.user = app.session.user\r\n\r\n        this.enabled = m.prop(0)\r\n        this.secret = m.prop('')\r\n        this.url = m.prop('')\r\n\r\n        this.twoFactorCode = m.prop('')\r\n\r\n        $.getScript('https://cdn.rawgit.com/igorescobar/jQuery-Mask-Plugin/master/src/jquery.mask.js', function () {\r\n            $('#passcode').mask('000000')\r\n        })\r\n\r\n        app.request({\r\n            url: app.forum.attribute('apiUrl') + '/twofactor/getsecret',\r\n            method: 'GET'\r\n        }).then(response => {\r\n            this.secret(response.data[0].attributes.data.google2fa_secret)\r\n            this.url(response.data[1].id)\r\n            this.enabled(response.data[0].attributes.data.twofa_enabled)\r\n            m.redraw()\r\n        })\r\n    }\r\n\r\n    className() {\r\n        return 'TwoFactorModal Modal--small'\r\n    }\r\n\r\n    title() {\r\n        return app.translator.trans('reflar-twofactor.forum.modal.twofactor_title')\r\n    }\r\n\r\n    content(user) {\r\n        if (this.enabled() === 3) {\r\n            app.modal.show(new PhoneModal())\r\n        }\r\n        return (\r\n            <div className='Modal-body'>\r\n                <div className='Form'>\r\n                    {this.enabled() === 1 ? (\r\n                        <div className='Form-group'>\r\n                            <h2>{app.translator.trans('reflar-twofactor.forum.modal.2fa_heading')}</h2>\r\n                            {app.forum.data.attributes.twillio_enabled === \"1\" ?\r\n                                Button.component({\r\n                                    className: 'Button Button--primary Switch-button',\r\n                                    onclick: () => {\r\n                                        app.modal.close()\r\n                                        app.modal.show(new PhoneModal())\r\n                                    },\r\n                                    children: app.translator.trans('reflar-twofactor.forum.modal.stPhone')\r\n                                })\r\n                                : ''}\r\n                            {app.forum.data.attributes.authy_enabled === \"1\" ?\r\n                                Button.component({\r\n                                    className: 'Button Button--primary Switch-button',\r\n                                    onclick: () => {\r\n                                        app.modal.close()\r\n                                        app.modal.show(new AuthyModal())\r\n                                    },\r\n                                    children: app.translator.trans('reflar-twofactor.forum.modal.stAuthy')\r\n                                })\r\n                                : ''}\r\n                            <div style='text-align: center' className='helpText Submit-Button'>\r\n                                {app.translator.trans('reflar-twofactor.forum.modal.helpQR')}\r\n                            </div>\r\n                            <div className='TwoFactor-img Submit-Button'>\r\n                                <img src={decodeURIComponent(this.url())}/>\r\n                                <h3>{this.secret()}</h3>\r\n                            </div>\r\n                            <div className='TwoFactor-input'>\r\n                                <input type='text'\r\n                                       id='passcode'\r\n                                       oninput={m.withAttr('value', this.twoFactorCode)}\r\n                                       className='FormControl'\r\n                                       placeholder={app.translator.trans('reflar-twofactor.forum.modal.placeholder')}/>\r\n                            </div>\r\n                            <Button className='Button Button--primary TwoFactor-button' loading={this.loading}\r\n                                    type='submit'>\r\n                                {app.translator.trans('reflar-twofactor.forum.modal.button')}\r\n                            </Button>\r\n                        </div>\r\n                    ) : ''}\r\n                    {this.enabled() !== 1 && this.enabled() !== 3 ? (\r\n                        <div className='Form-group'>\r\n                            <label>{app.translator.trans('reflar-twofactor.forum.modal.heading')}</label>\r\n                            <div>\r\n                                {Switch.component({\r\n                                    state: this.enabled(),\r\n                                    children: app.translator.trans('reflar-twofactor.forum.modal.switch'),\r\n                                    className: 'TwoFactor-switch',\r\n                                    onchange: (value) => {\r\n                                        app.request({\r\n                                            url: app.forum.attribute('apiUrl') + '/twofactor/verifycode',\r\n                                            method: 'POST',\r\n                                            data: {\r\n                                                'step': value\r\n                                            }\r\n                                        }).then(response => {\r\n                                            this.enabled(+value)\r\n                                            app.request({\r\n                                                url: app.forum.attribute('apiUrl') + '/twofactor/getsecret',\r\n                                                method: 'GET'\r\n                                            }).then(response => {\r\n                                                this.secret(response.data[0].attributes.data.google2fa_secret)\r\n                                                this.url(response.data[1].id)\r\n                                                m.redraw()\r\n                                            })\r\n                                        })\r\n                                    }\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                    ) : ''}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    onsubmit(e) {\r\n        e.preventDefault()\r\n\r\n        if (this.loading) return\r\n\r\n        this.loading = true\r\n\r\n        this.alert = null\r\n\r\n        app.request({\r\n            url: app.forum.attribute('apiUrl') + '/twofactor/verifycode',\r\n            method: 'POST',\r\n            data: {\r\n                'step': 2,\r\n                'code': this.twoFactorCode()\r\n            }\r\n        }).then(response => {\r\n            const data = response.data.id\r\n            if (data === 'IncorrectCode') {\r\n                this.alert = new Alert({\r\n                    type: 'error',\r\n                    children: app.translator.trans('reflar-twofactor.forum.incorrect_2fa')\r\n                })\r\n                m.redraw()\r\n            } else {\r\n                app.alerts.show(this.successAlert = new Alert({\r\n                    type: 'success',\r\n                    children: app.translator.trans('reflar-twofactor.forum.2fa_enabled')\r\n                }))\r\n                app.modal.show(new RecoveryModal({data}))\r\n            }\r\n        })\r\n\r\n        this.loading = false\r\n    }\r\n}\r\n","import {extend} from 'flarum/extend'\r\nimport app from 'flarum/app'\r\nimport Alert from 'flarum/components/Alert'\r\nimport Button from 'flarum/components/Button'\r\nimport LogInFactorModal from './components/LogInFactorModal'\r\nimport LogInModal from 'flarum/components/LogInModal'\r\nimport Model from 'flarum/Model'\r\nimport SettingsPage from 'flarum/components/SettingsPage'\r\nimport TwoFactorModal from './components/TwoFactorModal'\r\nimport User from 'flarum/models/User'\r\n\r\napp.initializers.add('reflar-twofactor', () => {\r\n    User.prototype.twofa_enabled = Model.attribute('twofa-enabled')\r\n\r\n\r\n    LogInModal.prototype.init = function () {\r\n        this.identification = m.prop(this.props.identification || '')\r\n\r\n        this.password = m.prop(this.props.password || '')\r\n\r\n        this.remember = m.prop(this.props.remember && true)\r\n\r\n        this.pageId = this.makeid()\r\n    }\r\n\r\n    LogInModal.prototype.makeid = function () {\r\n        var text = \"\";\r\n        var possible = \"0123456789\";\r\n\r\n        for (var i = 0; i < 5; i++)\r\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n\r\n        return text;\r\n    }\r\n\r\n    LogInModal.prototype.onsubmit = function (e) {\r\n        e.preventDefault()\r\n\r\n        this.loading = true\r\n\r\n        const identification = this.identification()\r\n        const password = this.password()\r\n        const remember = this.remember()\r\n        const pageId = this.pageId\r\n\r\n        app.request({\r\n            url: app.forum.attribute('apiUrl') + '/twofactor/login',\r\n            method: 'POST',\r\n            errorHandler: this.failure.bind(this),\r\n            data: {identification, password, remember, pageId}\r\n        }).then(response => {\r\n                if (response.userId === 'IncorrectCode') {\r\n                    let data = {\r\n                        identification: this.identification(),\r\n                        password: this.password(),\r\n                        remember: this.remember(),\r\n                        pageId: this.pageId\r\n                    }\r\n                    app.modal.show(new LogInFactorModal({data}))\r\n                } else {\r\n                    window.location.reload()\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    LogInModal.prototype.failure = function (response) {\r\n        if (parseInt(response.status) === 401) {\r\n            this.alert = new Alert({\r\n                type: 'error',\r\n                dismissible: false,\r\n                children: app.translator.trans('core.forum.log_in.invalid_login_message')\r\n            });\r\n            this.loading = false\r\n            m.redraw()\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    extend(SettingsPage.prototype, 'accountItems', (items) => {\r\n            items.add('2 Factor',\r\n                Button.component({\r\n                        className: 'Button',\r\n                        onclick: () => {\r\n                            app.modal.show(new TwoFactorModal())\r\n                        }\r\n                    },\r\n                    [app.translator.trans('reflar-twofactor.forum.accountlabel')])\r\n                , 1)\r\n        }\r\n    )\r\n})\r\n","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/LogInModal'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/SettingsPage'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['utils/ItemList'];"],"sourceRoot":""}