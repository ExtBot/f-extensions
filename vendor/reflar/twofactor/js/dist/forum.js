module.exports=function(e){var a={};function t(o){if(a[o])return a[o].exports;var n=a[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=e,t.c=a,t.d=function(e,a,o){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)t.d(o,n,function(a){return e[a]}.bind(null,n));return o},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=52)}([function(e,a){e.exports=flarum.core.compat.app},function(e,a){e.exports=flarum.core.compat["components/Button"]},function(e,a){e.exports=flarum.core.compat["components/Alert"]},function(e,a,t){"use strict";t.d(a,"a",function(){return r});var o=t(19),n=t.n(o);function r(e,a){e.prototype=n()(a.prototype),e.prototype.constructor=e,e.__proto__=a}},function(e,a){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},function(e,a,t){e.exports=!t(12)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,a){e.exports=flarum.core.compat.extend},function(e,a){e.exports=flarum.core.compat["components/Modal"]},function(e,a){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)},function(e,a,t){var o=t(10);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},function(e,a){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,a,t){var o=t(9),n=t(28),r=t(29),c=Object.defineProperty;a.f=t(5)?Object.defineProperty:function(e,a,t){if(o(e),a=r(a,!0),o(t),n)try{return c(e,a,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(e[a]=t.value),e}},function(e,a){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,a,t){var o=t(10),n=t(4).document,r=o(n)&&o(n.createElement);e.exports=function(e){return r?n.createElement(e):{}}},function(e,a){var t={}.hasOwnProperty;e.exports=function(e,a){return t.call(e,a)}},function(e,a,t){var o=t(35),n=t(37);e.exports=function(e){return o(n(e))}},function(e,a){var t=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:t)(e)}},function(e,a,t){var o=t(41)("keys"),n=t(43);e.exports=function(e){return o[e]||(o[e]=n(e))}},function(e,a){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,a,t){e.exports=t(22)},function(e,a){e.exports=flarum.core.compat["components/Switch"]},function(e,a){e.exports=flarum.core.compat["components/LogInModal"]},function(e,a,t){t(23);var o=t(8).Object;e.exports=function(e,a){return o.create(e,a)}},function(e,a,t){var o=t(24);o(o.S,"Object",{create:t(31)})},function(e,a,t){var o=t(4),n=t(8),r=t(25),c=t(27),m=t(14),i=function(e,a,t){var s,d,u,l=e&i.F,f=e&i.G,p=e&i.S,h=e&i.P,w=e&i.B,b=e&i.W,y=f?n:n[a]||(n[a]={}),v=y.prototype,g=f?o:p?o[a]:(o[a]||{}).prototype;for(s in f&&(t=a),t)(d=!l&&g&&void 0!==g[s])&&m(y,s)||(u=d?g[s]:t[s],y[s]=f&&"function"!=typeof g[s]?t[s]:w&&d?r(u,o):b&&g[s]==u?function(e){var a=function(a,t,o){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(a);case 2:return new e(a,t)}return new e(a,t,o)}return e.apply(this,arguments)};return a.prototype=e.prototype,a}(u):h&&"function"==typeof u?r(Function.call,u):u,h&&((y.virtual||(y.virtual={}))[s]=u,e&i.R&&v&&!v[s]&&c(v,s,u)))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,i.U=64,i.R=128,e.exports=i},function(e,a,t){var o=t(26);e.exports=function(e,a,t){if(o(e),void 0===a)return e;switch(t){case 1:return function(t){return e.call(a,t)};case 2:return function(t,o){return e.call(a,t,o)};case 3:return function(t,o,n){return e.call(a,t,o,n)}}return function(){return e.apply(a,arguments)}}},function(e,a){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,a,t){var o=t(11),n=t(30);e.exports=t(5)?function(e,a,t){return o.f(e,a,n(1,t))}:function(e,a,t){return e[a]=t,e}},function(e,a,t){e.exports=!t(5)&&!t(12)(function(){return 7!=Object.defineProperty(t(13)("div"),"a",{get:function(){return 7}}).a})},function(e,a,t){var o=t(10);e.exports=function(e,a){if(!o(e))return e;var t,n;if(a&&"function"==typeof(t=e.toString)&&!o(n=t.call(e)))return n;if("function"==typeof(t=e.valueOf)&&!o(n=t.call(e)))return n;if(!a&&"function"==typeof(t=e.toString)&&!o(n=t.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e,a){e.exports=function(e,a){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:a}}},function(e,a,t){var o=t(9),n=t(32),r=t(18),c=t(17)("IE_PROTO"),m=function(){},i=function(){var e,a=t(13)("iframe"),o=r.length;for(a.style.display="none",t(44).appendChild(a),a.src="javascript:",(e=a.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),i=e.F;o--;)delete i.prototype[r[o]];return i()};e.exports=Object.create||function(e,a){var t;return null!==e?(m.prototype=o(e),t=new m,m.prototype=null,t[c]=e):t=i(),void 0===a?t:n(t,a)}},function(e,a,t){var o=t(11),n=t(9),r=t(33);e.exports=t(5)?Object.defineProperties:function(e,a){n(e);for(var t,c=r(a),m=c.length,i=0;m>i;)o.f(e,t=c[i++],a[t]);return e}},function(e,a,t){var o=t(34),n=t(18);e.exports=Object.keys||function(e){return o(e,n)}},function(e,a,t){var o=t(14),n=t(15),r=t(38)(!1),c=t(17)("IE_PROTO");e.exports=function(e,a){var t,m=n(e),i=0,s=[];for(t in m)t!=c&&o(m,t)&&s.push(t);for(;a.length>i;)o(m,t=a[i++])&&(~r(s,t)||s.push(t));return s}},function(e,a,t){var o=t(36);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},function(e,a){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,a){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,a,t){var o=t(15),n=t(39),r=t(40);e.exports=function(e){return function(a,t,c){var m,i=o(a),s=n(i.length),d=r(c,s);if(e&&t!=t){for(;s>d;)if((m=i[d++])!=m)return!0}else for(;s>d;d++)if((e||d in i)&&i[d]===t)return e||d||0;return!e&&-1}}},function(e,a,t){var o=t(16),n=Math.min;e.exports=function(e){return e>0?n(o(e),9007199254740991):0}},function(e,a,t){var o=t(16),n=Math.max,r=Math.min;e.exports=function(e,a){return(e=o(e))<0?n(e+a,0):r(e,a)}},function(e,a,t){var o=t(8),n=t(4),r=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(e.exports=function(e,a){return r[e]||(r[e]=void 0!==a?a:{})})("versions",[]).push({version:o.version,mode:t(42)?"pure":"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,a){e.exports=!0},function(e,a){var t=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+o).toString(36))}},function(e,a,t){var o=t(4).document;e.exports=o&&o.documentElement},function(e,a){e.exports=flarum.core.compat.Model},function(e,a){e.exports=flarum.core.compat["components/SettingsPage"]},function(e,a){e.exports=flarum.core.compat["utils/ItemList"]},function(e,a){e.exports=flarum.core.compat["helpers/listItems"]},function(e,a){e.exports=flarum.core.compat["components/Dropdown"]},function(e,a){e.exports=flarum.core.compat["models/User"]},,function(e,a,t){"use strict";t.r(a);var o=t(6),n=t(0),r=t.n(n),c=t(2),i=t.n(c),s=t(1),d=t.n(s),u=t(3),l=t(7),f=t.n(l),p=function(e){function a(){return e.apply(this,arguments)||this}Object(u.a)(a,e);var t=a.prototype;return t.init=function(){e.prototype.init.call(this),this.identification=this.props.data.identification,this.password=this.props.data.password,this.remember=this.props.data.remember,this.pageId=this.props.data.pageId,this.twoFactorCode=m.prop(""),$.getScript("https://cdn.rawgit.com/igorescobar/jQuery-Mask-Plugin/master/src/jquery.mask.js",function(){$("#code").mask("AAA-AAA",{placeholder:"   -   "})})},t.className=function(){return"TwoFactorModal Modal--small"},t.title=function(){return r.a.translator.trans("reflar-twofactor.forum.modal.login_title")},t.content=function(e){return m("div",{className:"Modal-body"},r.a.translator.trans("reflar-twofactor.forum.modal.2fa_help"),m("div",{className:"Form"},m("div",{className:"Form-group"},m("div",{className:"TwoFactor-input"},m("input",{type:"text",style:"text-transform:uppercase",id:"code",oninput:m.withAttr("value",this.twoFactorCode),className:"FormControl",placeholder:r.a.translator.trans("reflar-twofactor.forum.modal.placeholder")})),m(d.a,{className:"Button Button--primary TwoFactor-button",loading:this.loading,type:"submit"},r.a.translator.trans("reflar-twofactor.forum.modal.button")))))},t.onsubmit=function(e){var a=this;e.preventDefault(),this.loading||(this.loading=!0,this.twoFactorCode(this.twoFactorCode().toUpperCase()),r.a.request({url:r.a.forum.attribute("apiUrl")+"/twofactor/login",method:"POST",data:{identification:this.identification,password:this.password,remember:this.remember,twofactor:this.twoFactorCode(),pageId:this.pageId}}).then(function(e){"IncorrectCode"===e.userId?(a.alert=new i.a({type:"error",dismissible:!1,children:r.a.translator.trans("reflar-twofactor.forum.incorrect_2fa")}),a.loading=!1,m.redraw()):window.location.reload()}))},a}(f.a),h=t(21),w=t.n(h),b=t(45),y=t.n(b),v=t(46),g=t.n(v),x=t(20),S=t.n(x),N=t(47),F=t.n(N),M=t(48),_=t.n(M),C=t(49),T=t.n(C),I=function(e){function a(){return e.apply(this,arguments)||this}Object(u.a)(a,e);var t=a.prototype;return t.init=function(){e.prototype.init.call(this),this.recoveries=this.props.data.split(",")},t.className=function(){return"TwoFactorModal Modal--small"},t.title=function(){return r.a.translator.trans("reflar-twofactor.forum.modal.twofactor_title")},t.content=function(e){return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("div",{className:"TwoFactor-codes"},m("h3",null,r.a.translator.trans("reflar-twofactor.forum.modal.recov_help1")),m("h4",null,r.a.translator.trans("reflar-twofactor.forum.modal.recov_help2")),this.recoveries.map(function(e){return m("br",null),m("h3",null,e)})),m(d.a,{className:"Button Button--primary TwoFactor-button",loading:this.loading,type:"submit"},r.a.translator.trans("reflar-twofactor.forum.modal.close")))))},t.onsubmit=function(e){r.a.modal.close()},a}(f.a),P=function(e){function a(){return e.apply(this,arguments)||this}Object(u.a)(a,e);var t=a.prototype;return t.init=function(){e.prototype.init.call(this),this.twoFactorCode=m.prop(""),this.phone=m.prop(""),this.enabled=m.prop(r.a.session.user.twofa_enabled()),$.getScript("https://cdn.rawgit.com/igorescobar/jQuery-Mask-Plugin/master/src/jquery.mask.js",function(){$("#phone").mask("(000) 000-0000"),$("#code").mask("AAA-AAA",{placeholder:"   -   "})}),this.country={name:"United States of America",mcode:"+1"},this.countries=[{name:"United States of America",mcode:"+1"},{name:"United Kingdom",mcode:"+44"},{name:"Algeria",mcode:"+213"},{name:"Andorra",mcode:"+376"},{name:"Angola",mcode:"+244"},{name:"Anguilla",mcode:"+1264"},{name:"Antigua & Barbuda",mcode:"+1268"},{name:"Argentina",mcode:"+54"},{name:"Armenia",mcode:"+374"},{name:"Aruba",mcode:"+297"},{name:"Australia",mcode:"+61"},{name:"Austria",mcode:"+43"},{name:"Azerbaijan",mcode:"+994"},{name:"Bahamas",mcode:"+1242"},{name:"Bahrain",mcode:"+973"},{name:"Bangladesh",mcode:"+880"},{name:"Barbados",mcode:"+1246"},{name:"Belarus",mcode:"+375"},{name:"Belgium",mcode:"+32"},{name:"Belize",mcode:"+501"},{name:"Benin",mcode:"+229"},{name:"Bermuda",mcode:"+1441"},{name:"Bhutan",mcode:"+975"},{name:"Bolivia",mcode:"+591"},{name:"Bosnia Herzegovina",mcode:"+387"},{name:"Botswana",mcode:"+267"},{name:"Brazil",mcode:"+55"},{name:"Brunei",mcode:"+673"},{name:"Bulgaria",mcode:"+359"},{name:"Burkina Faso",mcode:"+226"},{name:"Burundi",mcode:"+257"},{name:"Cambodia",mcode:"+855"},{name:"Cameroon",mcode:"+237"},{name:"Canada",mcode:"+1"},{name:"Cape Verde Islands",mcode:"+238"},{name:"Cayman Islands",mcode:"+1345"},{name:"Central African Republic",mcode:"+236"},{name:"Chile",mcode:"+56"},{name:"China",mcode:"+86"},{name:"Colombia",mcode:"+57"},{name:"Comoros",mcode:"+269"},{name:"Congo",mcode:"+242"},{name:"Cook Islands",mcode:"+682"},{name:"Costa Rica",mcode:"+506"},{name:"Croatia",mcode:"+385"},{name:"Cuba",mcode:"+53"},{name:"Cyprus - North",mcode:"+90"},{name:"Cyprus - South",mcode:"+357"},{name:"Czech Republic",mcode:"+420"},{name:"Denmark",mcode:"+45"},{name:"Djibouti",mcode:"+253"},{name:"Dominica",mcode:"+1809"},{name:"Dominican Republic",mcode:"+1809"},{name:"Ecuador",mcode:"+593"},{name:"Egypt",mcode:"+20"},{name:"El Salvador",mcode:"+503"},{name:"Equatorial Guinea",mcode:"+240"},{name:"Eritrea",mcode:"+291"},{name:"Estonia",mcode:"+372"},{name:"Ethiopia",mcode:"+251"},{name:"Falkland Islands",mcode:"+500"},{name:"Faroe Islands",mcode:"+298"},{name:"Fiji",mcode:"+679"},{name:"Finland",mcode:"+358"},{name:"France",mcode:"+33"},{name:"French Guiana",mcode:"+594"},{name:"French Polynesia",mcode:"+689"},{name:"Gabon",mcode:"+241"},{name:"Gambia",mcode:"+220"},{name:"Georgia",mcode:"+7880"},{name:"Germany",mcode:"+49"},{name:"Ghana",mcode:"+233"},{name:"Gibraltar",mcode:"+350"},{name:"Greece",mcode:"+30"},{name:"Greenland",mcode:"+299"},{name:"Grenada",mcode:"+1473"},{name:"Guadeloupe",mcode:"+590"},{name:"Guam",mcode:"+671"},{name:"Guatemala",mcode:"+502"},{name:"Guinea",mcode:"+224"},{name:"Guinea - Bissau",mcode:"+245"},{name:"Guyana",mcode:"+592"},{name:"Haiti",mcode:"+509"},{name:"Honduras",mcode:"+504"},{name:"Hong Kong",mcode:"+852"},{name:"Hungary",mcode:"+36"},{name:"Iceland",mcode:"+354"},{name:"India",mcode:"+91"},{name:"Indonesia",mcode:"+62"},{name:"Iraq",mcode:"+964"},{name:"Iran",mcode:"+98"},{name:"Ireland",mcode:"+353"},{name:"Israel",mcode:"+972"},{name:"Italy",mcode:"+39"},{name:"Jamaica",mcode:"+1876"},{name:"Japan",mcode:"+81"},{name:"Jordan",mcode:"+962"},{name:"Kazakhstan",mcode:"+7"},{name:"Kenya",mcode:"+254"},{name:"Kiribati",mcode:"+686"},{name:"Korea - North",mcode:"+850"},{name:"Korea - South",mcode:"+82"},{name:"Kuwait",mcode:"+965"},{name:"Kyrgyzstan",mcode:"+996"},{name:"Laos",mcode:"+856"},{name:"Latvia",mcode:"+371"},{name:"Lebanon",mcode:"+961"},{name:"Lesotho",mcode:"+266"},{name:"Liberia",mcode:"+231"},{name:"Libya",mcode:"+218"},{name:"Liechtenstein",mcode:"+417"},{name:"Lithuania",mcode:"+370"},{name:"Luxembourg",mcode:"+352"},{name:"Macao",mcode:"+853"},{name:"Macedonia",mcode:"+389"},{name:"Madagascar",mcode:"+261"},{name:"Malawi",mcode:"+265"},{name:"Malaysia",mcode:"+60"},{name:"Maldives",mcode:"+960"},{name:"Mali",mcode:"+223"},{name:"Malta",mcode:"+356"},{name:"Marshall Islands",mcode:"+692"},{name:"Martinique",mcode:"+596"},{name:"Mauritania",mcode:"+222"},{name:"Mayotte",mcode:"+269"},{name:"Mexico",mcode:"+52"},{name:"Micronesia",mcode:"+691"},{name:"Moldova",mcode:"+373"},{name:"Monaco",mcode:"+377"},{name:"Mongolia",mcode:"+976"},{name:"Montserrat",mcode:"+1664"},{name:"Morocco",mcode:"+212"},{name:"Mozambique",mcode:"+258"},{name:"Myanmar",mcode:"+95"},{name:"Namibia",mcode:"+264"},{name:"Nauru",mcode:"+674"},{name:"Nepal",mcode:"+977"},{name:"Netherlands",mcode:"+31"},{name:"New Caledonia",mcode:"+687"},{name:"New Zealand",mcode:"+64"},{name:"Nicaragua",mcode:"+505"},{name:"Niger",mcode:"+227"},{name:"Nigeria",mcode:"+234"},{name:"Niue",mcode:"+683"},{name:"Norfolk Islands",mcode:"+672"},{name:"Northern Marianas",mcode:"+670"},{name:"Norway",mcode:"+47"},{name:"Oman",mcode:"+968"},{name:"Pakistan",mcode:"+92"},{name:"Palau",mcode:"+680"},{name:"Panama",mcode:"+507"},{name:"Papua New Guinea",mcode:"+675"},{name:"Paraguay",mcode:"+595"},{name:"Peru",mcode:"+51"},{name:"Philippines",mcode:"+63"},{name:"Poland",mcode:"+48"},{name:"Portugal",mcode:"+351"},{name:"Puerto Rico",mcode:"+1787"},{name:"Qatar",mcode:"+974"},{name:"Reunion",mcode:"+262"},{name:"Romania",mcode:"+40"},{name:"Russia",mcode:"+7"},{name:"Rwanda",mcode:"+250"},{name:"San Marino",mcode:"+378"},{name:"Sao Tome & Principe",mcode:"+239"},{name:"Saudi Arabia",mcode:"+966"},{name:"Senegal",mcode:"+221"},{name:"Serbia",mcode:"+381"},{name:"Seychelles",mcode:"+248"},{name:"Sierra Leone",mcode:"+232"},{name:"Singapore",mcode:"+65"},{name:"Slovak Republic",mcode:"+421"},{name:"Slovenia",mcode:"+386"},{name:"Solomon Islands",mcode:"+677"},{name:"Somalia",mcode:"+252"},{name:"South Africa",mcode:"+27"},{name:"Spain",mcode:"+34"},{name:"Sri Lanka",mcode:"+94"},{name:"St. Helena",mcode:"+290"},{name:"St. Kitts",mcode:"+1869"},{name:"St. Lucia",mcode:"+1758"},{name:"Suriname",mcode:"+597"},{name:"Sudan",mcode:"+249"},{name:"Swaziland",mcode:"+268"},{name:"Sweden",mcode:"+46"},{name:"Switzerland",mcode:"+41"},{name:"Syria",mcode:"+963"},{name:"Taiwan",mcode:"+886"},{name:"Tajikistan",mcode:"+992"},{name:"Thailand",mcode:"+66"},{name:"Togo",mcode:"+228"},{name:"Tonga",mcode:"+676"},{name:"Trinidad & Tobago",mcode:"+1868"},{name:"Tunisia",mcode:"+216"},{name:"Turkey",mcode:"+90"},{name:"Turkmenistan",mcode:"+993"},{name:"Turks & Caicos Islands",mcode:"+1649"},{name:"Tuvalu",mcode:"+688"},{name:"Uganda",mcode:"+256"},{name:"Ukraine",mcode:"+380"},{name:"United Arab Emirates",mcode:"+971"},{name:"Uruguay",mcode:"+598"},{name:"Uzbekistan",mcode:"+998"},{name:"Vanuatu",mcode:"+678"},{name:"Vatican City",mcode:"+379"},{name:"Venezuela",mcode:"+58"},{name:"Vietnam",mcode:"+84"},{name:"Virgin Islands - British",mcode:"+1"},{name:"Virgin Islands - US",mcode:"+1"},{name:"Wallis & Futuna",mcode:"+681"},{name:"Yemen",mcode:"North)(+969"},{name:"Yemen",mcode:"South)(+967"},{name:"Zambia",mcode:"+260"},{name:"Zimbabwe",mcode:"+263"}]},t.className=function(){return"TwoFactorModal Modal--small"},t.title=function(){return r.a.translator.trans("reflar-twofactor.forum.modal.twofactor_title")},t.countryItems=function(){var e=this,a=new F.a;return a.add("sort",T.a.component({buttonClassName:"Button FormControl",menuClassName:"Country-Dropdown-actual",label:this.country.name,children:this.countries.map(function(a){var t=e.country===a;return d.a.component({children:a.name,icon:!t||"check",onclick:function(){e.country=a},active:t})})})),a},t.content=function(e){var a=this;return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("h2",{style:"text-align: center"},r.a.translator.trans("reflar-twofactor.forum.modal.2fa_heading")),3!==this.enabled()?d.a.component({className:"Button Button--primary Switch-button",onclick:function(){r.a.modal.close(),r.a.modal.show(new B(a.user))},children:r.a.translator.trans("reflar-twofactor.forum.modal.stTOTP")}):"",m("div",{style:"text-align: center",className:"helpText Submit-Button"},r.a.translator.trans("reflar-twofactor.forum.modal.helpPhone"))),3!==this.enabled()?m("div",{className:"Form-group"},m("ul",{className:"Country-dropdown"},_()(this.countryItems().toArray())),m("input",{type:"text",id:"phone",oninput:m.withAttr("value",this.phone),className:"FormControl Phone-Input"}),d.a.component({className:"Button Button--primary",onclick:function(){r.a.request({url:r.a.forum.attribute("apiUrl")+"/twofactor/verifycode",method:"POST",data:{step:3,phone:a.country.mcode+a.phone().replace(/[- )(]/g,"")}}),a.enabled(3),m.redraw()},children:r.a.translator.trans("reflar-twofactor.forum.modal.submitPhone")})):m("div",null,d.a.component({className:"Button Button--primary TwoFactor-button",loading:this.loading,onclick:function(){r.a.request({url:r.a.forum.attribute("apiUrl")+"/twofactor/verifycode",method:"POST",data:{step:1},errorHandler:a.onerror.bind(a)}).then(function(){r.a.modal.close(),r.a.modal.show(new B(a.user))}),a.loading=!1},children:r.a.translator.trans("reflar-twofactor.forum.modal.back")}),m("input",{type:"text",id:"code",style:"text-transform: uppercase;",oninput:m.withAttr("value",this.twoFactorCode),className:"FormControl"}),d.a.component({className:"Button Button--primary TwoFactor-button",loading:this.loading,onclick:function(){r.a.request({url:r.a.forum.attribute("apiUrl")+"/twofactor/verifycode",method:"POST",data:{step:4,code:a.twoFactorCode()}}).then(function(e){var t=e.data.id;"IncorrectCode"===t?(a.alert=new i.a({type:"error",children:r.a.translator.trans("reflar-twofactor.forum.incorrect_2fa")}),m.redraw()):(r.a.alerts.show(a.successAlert=new i.a({type:"success",children:r.a.translator.trans("reflar-twofactor.forum.2fa_enabled")})),r.a.modal.show(new I({data:t})))}),a.loading=!1},children:r.a.translator.trans("reflar-twofactor.forum.modal.button")}))))},t.onsubmit=function(e){var a=this;e.preventDefault(),this.loading||(this.loading=!0,this.alert=null,r.a.request({url:r.a.forum.attribute("apiUrl")+"/twofactor/verifycode",method:"POST",data:{step:4,code:this.twoFactorCode()},errorHandler:this.onerror.bind(this)}).then(function(e){console.log(e);var t=e.data.id;"IncorrectCode"===t?(a.alert=new i.a({type:"error",children:r.a.translator.trans("reflar-twofactor.forum.incorrect_2fa")}),m.redraw()):(r.a.alerts.show(a.successAlert=new i.a({type:"success",children:r.a.translator.trans("reflar-twofactor.forum.2fa_enabled")})),r.a.modal.show(new I({data:t})))}),this.loading=!1)},a}(f.a),B=function(e){function a(){return e.apply(this,arguments)||this}Object(u.a)(a,e);var t=a.prototype;return t.init=function(){var a=this;e.prototype.init.call(this),this.user=r.a.session.user,this.enabled=m.prop(this.user.twofa_enabled()),this.secret=m.prop(""),this.url=m.prop(""),this.twoFactorCode=m.prop(""),$.getScript("https://cdn.rawgit.com/igorescobar/jQuery-Mask-Plugin/master/src/jquery.mask.js",function(){$("#passcode").mask("000000")}),r.a.request({url:r.a.forum.attribute("apiUrl")+"/twofactor/getsecret",method:"GET"}).then(function(e){a.secret(e.data[0].attributes.data.google2fa_secret),a.url(e.data[1].id),m.redraw()})},t.className=function(){return"TwoFactorModal Modal--small"},t.title=function(){return r.a.translator.trans("reflar-twofactor.forum.modal.twofactor_title")},t.content=function(e){var a=this;return 3===this.enabled()&&r.a.modal.show(new P),m("div",{className:"Modal-body"},m("div",{className:"Form"},1===this.enabled()?m("div",{className:"Form-group"},m("h2",null,r.a.translator.trans("reflar-twofactor.forum.modal.2fa_heading")),"1"===r.a.forum.data.attributes.twillio_enabled?d.a.component({className:"Button Button--primary Switch-button",onclick:function(){r.a.modal.close(),r.a.modal.show(new P)},children:r.a.translator.trans("reflar-twofactor.forum.modal.stPhone")}):"",m("div",{style:"text-align: center",className:"helpText Submit-Button"},r.a.translator.trans("reflar-twofactor.forum.modal.helpQR")),m("div",{className:"TwoFactor-img Submit-Button"},m("img",{src:decodeURIComponent(this.url())}),m("h3",null,this.secret())),m("div",{className:"TwoFactor-input"},m("input",{type:"text",id:"passcode",oninput:m.withAttr("value",this.twoFactorCode),className:"FormControl",placeholder:r.a.translator.trans("reflar-twofactor.forum.modal.placeholder")})),m(d.a,{className:"Button Button--primary TwoFactor-button",loading:this.loading,type:"submit"},r.a.translator.trans("reflar-twofactor.forum.modal.button"))):"",1!==this.enabled()&&3!==this.enabled()?m("div",{className:"Form-group"},m("label",null,r.a.translator.trans("reflar-twofactor.forum.modal.heading")),m("div",null,S.a.component({state:this.enabled(),children:r.a.translator.trans("reflar-twofactor.forum.modal.switch"),className:"TwoFactor-switch",onchange:function(e){r.a.request({url:r.a.forum.attribute("apiUrl")+"/twofactor/verifycode",method:"POST",data:{step:e}}).then(function(t){a.enabled(+e),r.a.request({url:r.a.forum.attribute("apiUrl")+"/twofactor/getsecret",method:"GET"}).then(function(e){a.secret(e.data[0].attributes.data.google2fa_secret),a.url(e.data[1].id),m.redraw()})})}}))):""))},t.onsubmit=function(e){var a=this;e.preventDefault(),this.loading||(this.loading=!0,this.alert=null,r.a.request({url:r.a.forum.attribute("apiUrl")+"/twofactor/verifycode",method:"POST",data:{step:2,code:this.twoFactorCode()}}).then(function(e){var t=e.data.id;"IncorrectCode"===t?(a.alert=new i.a({type:"error",children:r.a.translator.trans("reflar-twofactor.forum.incorrect_2fa")}),m.redraw()):(r.a.alerts.show(a.successAlert=new i.a({type:"success",children:r.a.translator.trans("reflar-twofactor.forum.2fa_enabled")})),r.a.modal.show(new I({data:t})))}),this.loading=!1)},a}(f.a),j=t(50),O=t.n(j);r.a.initializers.add("reflar-twofactor",function(){O.a.prototype.twofa_enabled=y.a.attribute("twofa-enabled"),w.a.prototype.init=function(){this.identification=m.prop(this.props.identification||""),this.password=m.prop(this.props.password||""),this.remember=m.prop(this.props.remember&&!0),this.pageId=this.makeid()},w.a.prototype.makeid=function(){for(var e="",a=0;a<5;a++)e+="0123456789".charAt(Math.floor(Math.random()*"0123456789".length));return e},w.a.prototype.onsubmit=function(e){var a=this;e.preventDefault(),this.loading=!0;var t=this.identification(),o=this.password(),n=this.remember(),c=this.pageId;r.a.request({url:r.a.forum.attribute("apiUrl")+"/twofactor/login",method:"POST",errorHandler:this.failure.bind(this),data:{identification:t,password:o,remember:n,pageId:c}}).then(function(e){if("IncorrectCode"===e.userId){var t={identification:a.identification(),password:a.password(),remember:a.remember(),pageId:a.pageId};r.a.modal.show(new p({data:t}))}else window.location.reload()})},w.a.prototype.failure=function(e){401===parseInt(e.status)&&(this.alert=new i.a({type:"error",dismissible:!1,children:r.a.translator.trans("core.forum.log_in.invalid_login_message")}),this.loading=!1,m.redraw())},Object(o.extend)(g.a.prototype,"accountItems",function(e){e.add("2 Factor",d.a.component({className:"Button",onclick:function(){r.a.modal.show(new B)}},[r.a.translator.trans("reflar-twofactor.forum.accountlabel")]),1)})})}]);
//# sourceMappingURL=forum.js.map