{"version":3,"sources":["webpack://module.exports/webpack/bootstrap","webpack://module.exports/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://module.exports/./src/admin/addUploadPane.js","webpack://module.exports/./src/admin/components/UploadPage.js","webpack://module.exports/./src/admin/index.js","webpack://module.exports/external \"flarum.core.compat['Component']\"","webpack://module.exports/external \"flarum.core.compat['app']\"","webpack://module.exports/external \"flarum.core.compat['components/AdminLinkButton']\"","webpack://module.exports/external \"flarum.core.compat['components/AdminNav']\"","webpack://module.exports/external \"flarum.core.compat['components/Alert']\"","webpack://module.exports/external \"flarum.core.compat['components/Button']\"","webpack://module.exports/external \"flarum.core.compat['components/PermissionGrid']\"","webpack://module.exports/external \"flarum.core.compat['components/Select']\"","webpack://module.exports/external \"flarum.core.compat['components/Switch']\"","webpack://module.exports/external \"flarum.core.compat['components/UploadImageButton']\"","webpack://module.exports/external \"flarum.core.compat['extend']\"","webpack://module.exports/external \"flarum.core.compat['utils/saveSettings']\""],"names":["app","routes","path","component","extensionSettings","m","route","extend","prototype","items","add","href","icon","children","description","translator","trans","UploadPage","init","loading","fields","checkboxes","objects","watermarkPositions","settings","data","settingsPrefix","uploadMethodOptions","addPrefix","templateOptions","values","forEach","key","prop","JSON","parse","mimeTypes","adapter","template","newMimeType","regex","view","className","onsubmit","bind","value","maxFileSize","oninput","withAttr","Object","keys","map","mime","config","updateMimeTypeKey","options","onchange","updateMimeTypeAdapter","getTemplateOptionsForInput","updateMimeTypeTemplate","type","onclick","deleteMimeType","addMimeType","templateOptionsDescriptions","state","mustResize","resizeMaxWidth","disabled","addsWatermarks","watermarkPosition","disableHotlinkProtection","disableDownloadLogging","cdnUrl","imgurClientId","qiniuKey","qiniuSecret","qiniuBucket","awsS3Key","awsS3Secret","awsS3Bucket","awsS3Region","ovhContainer","ovhTenantId","ovhUsername","ovhPassword","ovhRegion","changed","option","name","push","fieldsCheck","some","checkboxesCheck","objectsCheck","stringify","e","preventDefault","alerts","dismiss","successAlert","saveSettings","then","show","catch","redraw","initializers","addUploadPane","label","permission","allowGuest"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./admin.js\");\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import {extend} from \"flarum/extend\";\nimport AdminNav from \"flarum/components/AdminNav\";\nimport AdminLinkButton from \"flarum/components/AdminLinkButton\";\nimport UploadPage from \"./components/UploadPage\";\n\nexport default function () {\n    // create the route\n    app.routes['flagrow-upload'] = {path: '/flagrow/upload', component: UploadPage.component()};\n\n    // bind the route we created to the three dots settings button\n    app.extensionSettings['flagrow-upload'] = () => m.route(app.route('flagrow-upload'));\n\n    extend(AdminNav.prototype, 'items', items => {\n        // add the Image Upload tab to the admin navigation menu\n        items.add('flagrow-upload', AdminLinkButton.component({\n            href: app.route('flagrow-upload'),\n            icon: 'far fa-file',\n            children: 'File Upload',\n            description: app.translator.trans('flagrow-upload.admin.help_texts.description')\n        }));\n    });\n}","import Component from 'flarum/Component';\nimport Button from 'flarum/components/Button';\nimport saveSettings from 'flarum/utils/saveSettings';\nimport Alert from 'flarum/components/Alert';\nimport Select from 'flarum/components/Select';\nimport Switch from 'flarum/components/Switch';\nimport UploadImageButton from 'flarum/components/UploadImageButton';\n\nexport default class UploadPage extends Component {\n\n  init() {\n    // whether we are saving the settings or not right now\n    this.loading = false;\n\n    // the fields we need to watch and to save\n    this.fields = [\n      // image\n      'resizeMaxWidth',\n      'cdnUrl',\n      'maxFileSize',\n      'overrideAvatarUpload',\n      // watermark\n      'watermark',\n      'watermarkPosition',\n      // Imgur\n      'imgurClientId',\n      // AWS\n      'awsS3Key',\n      'awsS3Secret',\n      'awsS3Bucket',\n      'awsS3Region',\n      // OVH\n      'ovhUsername',\n      'ovhPassword',\n      'ovhTenantId',\n      'ovhContainer',\n      'ovhRegion',\n      // QIniu\n      'qiniuKey',\n      'qiniuSecret',\n      'qiniuBucket',\n    ];\n\n    // the checkboxes we need to watch and to save.\n    this.checkboxes = [\n      'mustResize',\n      'overrideAvatarUpload',\n      'addsWatermarks',\n\n      'disableHotlinkProtection',\n      'disableDownloadLogging',\n    ];\n\n    // fields that are objects\n    this.objects = [\n      'mimeTypes'\n    ];\n\n    // watermark positions\n    this.watermarkPositions = {\n      'top-left': 'top-left',\n      'top-right': 'top-right',\n      'bottom-left': 'bottom-left',\n      'bottom-right': 'bottom-right',\n      'center': 'center',\n      'left': 'left',\n      'top': 'top',\n      'right': 'right',\n      'bottom': 'bottom'\n    };\n\n    // get the saved settings from the database\n    const settings = app.data.settings;\n\n    // our package prefix (to be added to every field and checkbox in the setting table)\n    this.settingsPrefix = 'flagrow.upload';\n\n    // Options for the Upload methods dropdown menu.\n    this.uploadMethodOptions = settings[this.addPrefix('availableUploadMethods')] || {};\n    // Options for the Template dropdown menu.\n    this.templateOptions = settings[this.addPrefix('availableTemplates')] || {};\n\n    // Contains current values.\n    this.values = {};\n    // bind the values of the fields and checkboxes to the getter/setter functions\n    this.fields.forEach(key =>\n      this.values[key] = m.prop(settings[this.addPrefix(key)])\n    );\n    this.checkboxes.forEach(key =>\n      this.values[key] = m.prop(settings[this.addPrefix(key)] === '1')\n    );\n    this.objects.forEach(key =>\n      this.values[key] = settings[this.addPrefix(key)] ? m.prop(JSON.parse(settings[this.addPrefix(\n        key)])) : m.prop()\n    );\n\n    // Set a sane default in case no mimeTypes have been configured yet.\n    this.values.mimeTypes() || (this.values.mimeTypes = m.prop({\n      '^image\\\\/.*': {\n        adapter: 'local',\n        template: 'image-preview'\n      }\n    }));\n\n    this.newMimeType = {\n      regex: m.prop(''),\n      adapter: m.prop('local'),\n      template: m.prop('file')\n    };\n  }\n\n  /**\n   * Show the actual ImageUploadPage.\n   *\n   * @returns {*}\n   */\n  view() {\n    return [\n      m('div', { className: 'UploadPage' }, [\n        m('div', { className: 'container' }, [\n          m('form', { onsubmit: this.onsubmit.bind(this) }, [\n            m('fieldset', { className: 'UploadPage-preferences' }, [\n              m('legend', {}, app.translator.trans('flagrow-upload.admin.labels.preferences.title')),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.preferences.max_file_size')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.maxFileSize() || 2048,\n                oninput: m.withAttr('value', this.values.maxFileSize)\n              }),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.preferences.mime_types')),\n              m('div', { className: 'MimeTypes--Container' },\n                Object.keys(this.values.mimeTypes())\n                  .map(mime => {\n                    let config = this.values.mimeTypes()[mime];\n                    // Compatibility for older versions.\n                    if (typeof config !== 'object') {\n                      config = {\n                        adapter: config,\n                        template: 'file'\n                      };\n                    }\n\n                    return m('div', {}, [\n                      m('input', {\n                        className: 'FormControl MimeTypes',\n                        value: mime,\n                        oninput: m.withAttr('value', this.updateMimeTypeKey.bind(this, mime))\n                      }),\n                      Select.component({\n                        options: this.uploadMethodOptions,\n                        onchange: this.updateMimeTypeAdapter.bind(this, mime, config),\n                        value: config.adapter || 'local'\n                      }),\n                      Select.component({\n                        options: this.getTemplateOptionsForInput(),\n                        onchange: this.updateMimeTypeTemplate.bind(this, mime, config),\n                        value: config.template || 'local'\n                      }),\n                      Button.component({\n                        type: 'button',\n                        className: 'Button Button--warning',\n                        children: 'x',\n                        onclick: this.deleteMimeType.bind(this, mime)\n                      }),\n                    ]);\n                  }),\n                m('br'),\n                m('div', {}, [\n                  m('input', {\n                    className: 'FormControl MimeTypes add-MimeType-key',\n                    value: this.newMimeType.regex(),\n                    oninput: m.withAttr('value', this.newMimeType.regex)\n                  }),\n                  Select.component({\n                    options: this.uploadMethodOptions,\n                    className: 'add-MimeType-value',\n                    oninput: m.withAttr('value', this.newMimeType.adapter),\n                    value: this.newMimeType.adapter()\n                  }),\n                  Select.component({\n                    options: this.getTemplateOptionsForInput(),\n                    className: 'add-MimeType-value',\n                    oninput: m.withAttr('value', this.newMimeType.template),\n                    value: this.newMimeType.template()\n                  }),\n                  Button.component({\n                    type: 'button',\n                    className: 'Button Button--warning',\n                    children: '+',\n                    onclick: this.addMimeType.bind(this)\n                  }),\n                ])\n              ),\n              m('div', { className: 'helpText' }, app.translator.trans('flagrow-upload.admin.help_texts.mime_types')),\n              m('div', { className: 'helpText' }, app.translator.trans('flagrow-upload.admin.help_texts.download_templates')),\n              this.templateOptionsDescriptions()\n            ]),\n            m('fieldset', { className: 'UploadPage-resize' }, [\n              m('legend', {}, app.translator.trans('flagrow-upload.admin.labels.resize.title')),\n              m('div', { className: 'helpText' }, app.translator.trans('flagrow-upload.admin.help_texts.resize')),\n              Switch.component({\n                state: this.values.mustResize() || false,\n                children: app.translator.trans('flagrow-upload.admin.labels.resize.toggle'),\n                onchange: this.values.mustResize\n              }),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.resize.max_width')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.resizeMaxWidth() || 100,\n                oninput: m.withAttr('value', this.values.resizeMaxWidth),\n                disabled: !this.values.mustResize()\n              }),\n            ]),\n            m('fieldset', { className: 'UploadPage-watermark' }, [\n              m('legend', {}, app.translator.trans('flagrow-upload.admin.labels.watermark.title')),\n              m('div', { className: 'helpText' }, app.translator.trans('flagrow-upload.admin.help_texts.watermark')),\n              Switch.component({\n                state: this.values.addsWatermarks() || false,\n                children: app.translator.trans('flagrow-upload.admin.labels.watermark.toggle'),\n                onchange: this.values.addsWatermarks\n              }),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.watermark.position')),\n              m('div', {}, [\n                Select.component({\n                  options: this.watermarkPositions,\n                  onchange: this.values.watermarkPosition,\n                  value: this.values.watermarkPosition() || 'bottom-right'\n                }),\n              ]),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.watermark.file')),\n              <UploadImageButton name=\"flagrow/watermark\" />\n            ]),\n            m('fieldset', { className: 'UploadPage-downloading' }, [\n              m('legend', {}, app.translator.trans('flagrow-upload.admin.labels.disable-hotlink-protection.title')),\n              m('div',\n                { className: 'helpText' },\n                app.translator.trans('flagrow-upload.admin.help_texts.disable-hotlink-protection')),\n              Switch.component({\n                state: this.values.disableHotlinkProtection() || false,\n                children: app.translator.trans(\n                  'flagrow-upload.admin.labels.disable-hotlink-protection.toggle'),\n                onchange: this.values.disableHotlinkProtection\n              }),\n              m('legend', {}, app.translator.trans('flagrow-upload.admin.labels.disable-download-logging.title')),\n              m('div',\n                { className: 'helpText' },\n                app.translator.trans('flagrow-upload.admin.help_texts.disable-download-logging')),\n              Switch.component({\n                state: this.values.disableDownloadLogging() || false,\n                children: app.translator.trans(\n                  'flagrow-upload.admin.labels.disable-download-logging.toggle'),\n                onchange: this.values.disableDownloadLogging\n              }),\n            ]),\n            m('fieldset', {\n              className: 'UploadPage-local',\n            }, [\n              m('legend', {}, app.translator.trans('flagrow-upload.admin.labels.local.title')),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.local.cdn_url')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.cdnUrl() || '',\n                oninput: m.withAttr('value', this.values.cdnUrl)\n              }),\n            ]),\n            m('fieldset', {\n              className: 'UploadPage-imgur',\n            }, [\n              m('legend', {}, app.translator.trans('flagrow-upload.admin.labels.imgur.title')),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.imgur.client_id')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.imgurClientId() || '',\n                oninput: m.withAttr('value', this.values.imgurClientId)\n              }),\n            ]),\n\n              m('fieldset', {\n              className: 'UploadPage-qiniu',\n            }, [\n              m('legend', {}, app.translator.trans('flagrow-upload.admin.labels.qiniu.title')),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.qiniu.key')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.qiniuKey() || '',\n                oninput: m.withAttr('value', this.values.qiniuKey)\n              }),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.qiniu.secret')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.qiniuSecret() || '',\n                oninput: m.withAttr('value', this.values.qiniuSecret)\n              }),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.qiniu.bucket')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.qiniuBucket() || '',\n                oninput: m.withAttr('value', this.values.qiniuBucket)\n              }),\n        \n            ]), \n\n            m('fieldset', {\n              className: 'UploadPage-aws-s3',\n            }, [\n              m('legend', {}, app.translator.trans('flagrow-upload.admin.labels.aws-s3.title')),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.aws-s3.key')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.awsS3Key() || '',\n                oninput: m.withAttr('value', this.values.awsS3Key)\n              }),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.aws-s3.secret')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.awsS3Secret() || '',\n                oninput: m.withAttr('value', this.values.awsS3Secret)\n              }),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.aws-s3.bucket')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.awsS3Bucket() || '',\n                oninput: m.withAttr('value', this.values.awsS3Bucket)\n              }),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.aws-s3.region')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.awsS3Region() || '',\n                oninput: m.withAttr('value', this.values.awsS3Region)\n              }),\n            ]),\n            m('fieldset', {\n              className: 'UploadPage-ovh-svfs'\n            }, [\n              m('legend', {}, app.translator.trans('flagrow-upload.admin.labels.ovh-svfs.title')),\n              m('label',\n                {},\n                app.translator.trans('flagrow-upload.admin.labels.ovh-svfs.container')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.ovhContainer() || '',\n                oninput: m.withAttr('value', this.values.ovhContainer)\n              }),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.ovh-svfs.tenantid')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.ovhTenantId() || '',\n                oninput: m.withAttr('value', this.values.ovhTenantId)\n              }),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.ovh-svfs.username')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.ovhUsername() || '',\n                oninput: m.withAttr('value', this.values.ovhUsername)\n              }),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.ovh-svfs.password')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.ovhPassword() || '',\n                oninput: m.withAttr('value', this.values.ovhPassword)\n              }),\n              m('label', {}, app.translator.trans('flagrow-upload.admin.labels.ovh-svfs.region')),\n              m('input', {\n                className: 'FormControl',\n                value: this.values.ovhRegion() || '',\n                oninput: m.withAttr('value', this.values.ovhRegion)\n              }),\n            ]),\n            Button.component({\n              type: 'submit',\n              className: 'Button Button--primary',\n              children: app.translator.trans('flagrow-upload.admin.buttons.save'),\n              loading: this.loading,\n              disabled: !this.changed()\n            }),\n          ])\n        ])\n      ])\n    ];\n  }\n\n  getTemplateOptionsForInput() {\n    let options = [];\n\n    for (let option in this.templateOptions) {\n      options[option] = this.templateOptions[option].name;\n    }\n\n    return options;\n  }\n\n  updateMimeTypeKey(mime, value) {\n    this.values.mimeTypes()[value] = this.values.mimeTypes()[mime];\n\n    this.deleteMimeType(mime);\n  }\n\n  updateMimeTypeAdapter(mime, config, value) {\n    config.adapter = value;\n    this.values.mimeTypes()[mime] = config;\n  }\n\n  updateMimeTypeTemplate(mime, config, value) {\n    config.template = value;\n    this.values.mimeTypes()[mime] = config;\n  }\n\n  deleteMimeType(mime) {\n    delete this.values.mimeTypes()[mime];\n  }\n\n  templateOptionsDescriptions() {\n    const children = [];\n    for (let template in this.templateOptions) {\n      children.push(m('li', this.templateOptions[template].name + \": \" + this.templateOptions[template].description));\n    }\n\n    return m('ul', children);\n  }\n\n  addMimeType() {\n    this.values.mimeTypes()[this.newMimeType.regex()] = {\n      adapter: this.newMimeType.adapter(),\n      template: this.newMimeType.template()\n    };\n\n    this.newMimeType.regex('');\n    this.newMimeType.adapter('local');\n    this.newMimeType.template('file');\n  }\n\n  /**\n   * Checks if the values of the fields and checkboxes are different from\n   * the ones stored in the database\n   *\n   * @returns boolean\n   */\n  changed() {\n    var fieldsCheck = this.fields.some(\n      key => this.values[key]() !== app.data.settings[this.addPrefix(key)]);\n    var checkboxesCheck = this.checkboxes.some(\n      key => this.values[key]() !== (app.data.settings[this.addPrefix(key)] == '1'));\n    var objectsCheck = this.objects.some(\n      key => JSON.stringify(this.values[key]()) !== (app.data.settings[this.addPrefix(key)]));\n    return fieldsCheck || checkboxesCheck || objectsCheck;\n  }\n\n  /**\n   * Saves the settings to the database and redraw the page\n   *\n   * @param e\n   */\n  onsubmit(e) {\n    // prevent the usual form submit behaviour\n    e.preventDefault();\n\n    // if the page is already saving, do nothing\n    if (this.loading) return;\n\n    // prevents multiple savings\n    this.loading = true;\n\n    // remove previous success popup\n    app.alerts.dismiss(this.successAlert);\n\n    const settings = {};\n\n    // gets all the values from the form\n    this.fields.forEach(key => settings[this.addPrefix(key)] = this.values[key]());\n    this.checkboxes.forEach(key => settings[this.addPrefix(key)] = this.values[key]());\n    this.objects.forEach(key => settings[this.addPrefix(key)] = JSON.stringify(this.values[key]()));\n\n    // actually saves everything in the database\n    saveSettings(settings)\n      .then(() => {\n        // on success, show popup\n        app.alerts.show(this.successAlert = new Alert({\n          type: 'success',\n          children: app.translator.trans('core.admin.basics.saved_message')\n        }));\n      })\n      .catch(() => {\n      })\n      .then(() => {\n        // return to the initial state and redraw the page\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  /**\n   * Adds the prefix `this.settingsPrefix` at the beginning of `key`\n   *\n   * @returns string\n   */\n  addPrefix(key) {\n    return this.settingsPrefix + '.' + key;\n  }\n}\n","import {extend} from \"flarum/extend\";\nimport app from \"flarum/app\";\nimport PermissionGrid from \"flarum/components/PermissionGrid\";\nimport addUploadPane from \"./addUploadPane\";\n\napp.initializers.add('flagrow-upload', app => {\n    // add the admin pane\n    addUploadPane();\n\n    // add the permission option to the relative pane\n    extend(PermissionGrid.prototype, 'startItems', items => {\n        items.add('upload', {\n            icon: 'far fa-file',\n            label: app.translator.trans('flagrow-upload.admin.permissions.upload_label'),\n            permission: 'flagrow.upload'\n        });\n    });\n\n    // add the permission option to the relative pane\n    extend(PermissionGrid.prototype, 'viewItems', items => {\n        items.add('download', {\n            icon: 'fas fa-download',\n            label: app.translator.trans('flagrow-upload.admin.permissions.download_label'),\n            permission: 'flagrow.upload.download',\n            allowGuest: true\n        });\n    });\n});\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/AdminLinkButton'];","module.exports = flarum.core.compat['components/AdminNav'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/PermissionGrid'];","module.exports = flarum.core.compat['components/Select'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['components/UploadImageButton'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['utils/saveSettings'];"],"sourceRoot":""}