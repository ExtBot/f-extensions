# This file is a template, and might need editing before it works on your project.
# Official framework image. Look for the different tagged releases at:
# https://hub.docker.com/r/library/node/tags/
image: node:carbon

# This folder is cached between builds
# http://docs.gitlab.com/ce/ci/yaml/README.html#cache
cache:
  paths:
  - js/forum/node_modules/

compile_js:
  script:
   - git remote set-url origin https://tristian.kelly560:${CI_PUSH_TOKEN}@gitlab.com/tristian.kelly560/partialdev-flarum-ui.git
   - git config --global user.email "tristian.kelly560@gmail.com"
   - git config --global user.name "Tristian Kelly"
   - git checkout -B master
   - cd js/forum
   - npm install
   - npm install -g gulp
   - gulp
   - cd ../..
   - git add js/forum/dist
   - git commit -m "[skip ci] JS dist files"
   - git push origin
  artifacts:
   paths:
    - js/forum/dist/